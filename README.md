# Hadoku Task Mobile

![Build APK](https://github.com/YOUR_USERNAME/hadoku-task-mobile/actions/workflows/build-apk.yml/badge.svg)

Android APK wrapper for Hadoku Task using Capacitor.

## What This Does

This is a **simple wrapper app** that:
1. Shows a landing page to collect the user's access key
2. Loads `https://hadoku.me/task/` in a WebView
3. Passes the access key via URL parameters

**Important:** This app does NOT import the `@wolffm/task` package. It simply loads the deployed web app.

## Architecture

```
┌─────────────────────────┐
│  Android APK           │
│  ├─ Landing page       │  ← Collect access key
│  └─ WebView            │  ← Load hadoku.me/task/?key=...
└─────────────────────────┘
           │
           ▼
    https://hadoku.me/task/
    (React app from @wolffm/task)
```

## Setup

### Prerequisites

- Node.js 20+
- JDK 17+ (for Android builds)
- Android Studio (for development)

### Install Dependencies

```bash
npm install
```

### Initialize Capacitor (First Time)

```bash
npx cap add android
```

### Sync Web Assets to Android

```bash
npx cap sync
```

## Development

### Update Web Assets

After editing `www/` files:

```bash
npx cap sync
```

### Open in Android Studio

```bash
npx cap open android
```

Then use Android Studio to:
- Build the APK
- Run on emulator or device
- Debug native code

### Quick Commands

```bash
# Sync changes
npm run sync

# Open Android Studio
npm run open:android

# Build debug APK (from Android Studio or):
npm run android:build

# Install on connected device
npm run android:install
```

## Project Structure

```
hadoku-task-mobile/
├── www/                    # Web assets (landing page)
│   ├── index.html         # Main HTML
│   ├── css/
│   │   └── styles.css     # Styles
│   └── js/
│       └── app.js         # Auth logic
├── android/               # Generated by Capacitor (gitignored)
├── docs/                  # Documentation
├── capacitor.config.ts    # Capacitor configuration
└── package.json
```

## How It Works

1. **User opens app** → Sees landing page (`www/index.html`)
2. **User enters key** → Stored in `localStorage`
3. **App loads iframe** → Points to `hadoku.me/task/?key=USER_KEY`
4. **Web app handles everything** → Task management happens on server

## Mobile UX Improvements

Mobile-specific improvements (touch interactions, responsive layout, etc.) are implemented in the main `hadoku-task` repository, NOT here. This app just loads the deployed web app.

See `docs/MOBILE_IMPLEMENTATION_PLAN.md` for details.

## Widget Support (Future)

Android home screen widget implementation would require:
- Kotlin code in `android/app/src/main/java/`
- Widget layouts in `android/app/src/main/res/`
- Manifest entries

See `docs/WIDGET_QUICK_REFERENCE.md` for implementation guide.

## Building for Release

### Automated Build (Recommended)

Push to GitHub and let GitHub Actions build your APK automatically!

```bash
git add .
git commit -m "Update app"
git push
```

Download the built APK from the Actions tab on GitHub. See `docs/GITHUB_ACTIONS_DEPLOYMENT.md` for details.

### Manual Build (Android Studio)

1. Open Android Studio
2. Build > Generate Signed Bundle/APK
3. Follow prompts to create keystore and sign APK
4. APK will be in `android/app/build/outputs/apk/release/`

## Environment Variables

Create `.env.local` if needed for local development URLs:

```bash
# Optional: Use local development server instead of production
HADOKU_TASK_URL=http://localhost:3000
```

## Troubleshooting

### App shows blank screen
- Check that `hadoku.me/task/` is accessible
- Verify access key is correct
- Check browser console in WebView (enable in Android Studio)

### Can't build APK
- Ensure JDK 17+ is installed
- Check Android SDK is up to date
- Run `npx cap sync` again

### WebView not loading
- Check `capacitor.config.ts` has correct `webDir`
- Verify `www/` folder has content
- Check Android permissions in manifest

## License

MIT
